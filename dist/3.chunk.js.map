{"version":3,"sources":["/media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll-routing.module.ts","/media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.component.html","/media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.component.scss","/media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.component.ts","/media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.module.ts"],"names":[],"mappings":"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","file":"3.chunk.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\n\nimport { PollComponent } from \"./poll.component\";\n\nconst pollRoutes: Routes = [\n  {\n    path: \"\",\n    component: PollComponent\n  },\n  { path: \":id\", component: PollComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(pollRoutes)],\n  exports: [RouterModule]\n})\nexport class PollRoutingModule {}\n\n\n\n// WEBPACK FOOTER //\n// /media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll-routing.module.ts","module.exports = \"<app-loading *ngIf=\\\"loading\\\">\\n</app-loading>\\n\\n<ng-template [ngIf]=\\\"utils.isLoaded(loading)\\\">\\n  <div class=\\\"container\\\">\\n    <h1 class=\\\"text-center\\\">{{pageTitle}}</h1>\\n  </div>\\n  <ng-template [ngIf]=\\\"poll\\\">\\n    <div class=\\\"container bg-faded\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col\\\">\\n          <div class=\\\"input-group\\\" *ngFor=\\\"let option of poll.options\\\">\\n            <button class=\\\"btn btn-primary btn-lg btn-block\\\" type=\\\"button\\\" (click)=\\\"makeVote(option.title)\\\">Vote for {{option.title}}\\n            </button>\\n          </div>\\n          <p>Note: You must be logged in to vote.</p>\\n        </div>\\n        <div class=\\\"col\\\">\\n          <div style=\\\"display: block\\\">\\n            <canvas baseChart [data]=\\\"pieChartData\\\" [labels]=\\\"pieChartLabels\\\" [chartType]=\\\"pieChartType\\\" (chartHover)=\\\"chartHovered($event)\\\"\\n              (chartClick)=\\\"chartClicked($event)\\\"></canvas>\\n          </div>\\n        </div>\\n      </div>\\n      <button class=\\\"btn btn-danger\\\" *ngIf=\\\"myPoll\\\" (click)=\\\"deletePoll()\\\">Delete Poll</button>\\n    </div>\\n  </ng-template>\\n\\n  <!-- Error loading poll -->\\n  <div class=\\\"container\\\">\\n    <p *ngIf=\\\"error\\\" class=\\\"alert alert-danger\\\">\\n      <strong>Oops!</strong> {{errorMsg}}.\\n    </p>\\n  </div>\\n</ng-template>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.component.html\n// module id = ../../../../../src/app/pages/poll/poll.component.html\n// module chunks = 3","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".container {\\n  padding: 50px; }\\n\\n.btn {\\n  margin-bottom: 5px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.component.scss\n// module id = ../../../../../src/app/pages/poll/poll.component.scss\n// module chunks = 3","import { Component, OnInit, OnDestroy } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Title } from \"@angular/platform-browser\";\nimport { AuthService } from \"./../../auth/auth.service\";\nimport { ApiService } from \"./../../core/api.service\";\nimport { UtilsService } from \"./../../core/utils.service\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { Subscription } from \"rxjs/Subscription\";\nimport { PollModel } from \"./../../core/models/poll.model\";\n\n@Component({\n  selector: \"app-poll\",\n  templateUrl: \"./poll.component.html\",\n  styleUrls: [\"./poll.component.scss\"]\n})\nexport class PollComponent implements OnInit, OnDestroy {\n  pageTitle: string;\n  id: string;\n  routeSub: Subscription;\n  pollSub: Subscription;\n  poll: PollModel;\n  loading: boolean;\n  error: boolean;\n  errorMsg: string;\n  submitVoteObj: any;\n  public myPoll = false;\n  // Pie\n  public pieChartLabels: string[] = [];\n  public pieChartData: number[] = [];\n  public pieChartType: string = \"pie\";\n\n  constructor(\n    private route: ActivatedRoute,\n    public auth: AuthService,\n    private api: ApiService,\n    private title: Title,\n    public utils: UtilsService,\n    public router: Router\n  ) {}\n\n  ngOnInit() {\n    // Set poll Id from route params and subscribe\n    this.routeSub = this.route.params.subscribe(params => {\n      this.id = params[\"id\"];\n      this._getPoll();\n    });\n  }\n\n  // events\n  public chartClicked(e: any): void {\n    console.log(e);\n  }\n\n  public chartHovered(e: any): void {\n    console.log(e);\n  }\n\n  private _getPoll() {\n    this.loading = true;\n    this.pollSub = this.api.getPoll$(this.id).subscribe(\n      res => {\n        this.poll = res;\n        // console.log(res);\n        this.poll.options.forEach(option => {\n          this.pieChartLabels.push(option.title.toString());\n          this.pieChartData.push(option.count.toString());\n        });\n        this._setPageTitle(this.poll.title);\n        if (this.auth.userProfile) {\n          if (this.auth.userProfile.name === this.poll.owner) {\n            this.myPoll = true;\n          }\n        }\n        this.loading = false;\n      },\n      err => {\n        console.error(err);\n        this.loading = false;\n        this.error = true;\n        this.errorMsg = \"There was an error retreiving this poll.\";\n        this._setPageTitle(\"Poll Details\");\n      }\n    );\n  }\n\n  makeVote(option: string) {\n    if (!this.auth.userProfile) {\n      this.auth.login();\n    }\n    this.loading = true;\n    this.submitVoteObj = {\n      title: this.poll.title,\n      option: option,\n      voter: this.auth.userProfile.name\n    };\n    console.log(this.submitVoteObj);\n    this.api.postVote$(this.poll._id, this.submitVoteObj).subscribe(\n      res => {\n        this.poll = res;\n        this.poll.options.forEach(option => {\n          for (let i = 0; i < this.pieChartLabels.length; i++) {\n            if (this.pieChartLabels[i] === option.title.toString()) {\n              this.pieChartData[i] = option.count;\n            }\n          }\n        });\n        this._setPageTitle(this.poll.title);\n        this.loading = false;\n      },\n      err => {\n        console.error(err);\n        this.loading = false;\n        this.error = true;\n        this.errorMsg = \"You have already voted on this poll.\";\n        this._setPageTitle(\"Poll Details\");\n      }\n    );\n  }\n\n  deletePoll() {\n    this.api.deletePoll$(this.poll._id).subscribe(\n      res => {\n        console.log(res);\n        this.router.navigate([\"/\"]);\n      },\n      error => console.error(error)\n    );\n  }\n\n  private _setPageTitle(title: string) {\n    this.pageTitle = title;\n    this.title.setTitle(title);\n  }\n\n  ngOnDestroy() {\n    this.routeSub.unsubscribe();\n    this.pollSub.unsubscribe();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.component.ts","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { ChartsModule } from \"ng2-charts\";\n\nimport { SharedModule } from \"./../../shared/shared.module\";\n\nimport { PollComponent } from \"./poll.component\";\nimport { PollRoutingModule } from \"./poll-routing.module\";\n\n@NgModule({\n  imports: [CommonModule, SharedModule, PollRoutingModule, ChartsModule],\n  declarations: [PollComponent]\n})\nexport class PollModule {}\n\n\n\n// WEBPACK FOOTER //\n// /media/larry/B89880DC98809B10/WebApps/PollMe/pollme/src/app/pages/poll/poll.module.ts"],"sourceRoot":"webpack:///"}